<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Landing Page ç”Ÿæˆå™¨ï½œè¨±è—æ–¹</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@300;400;500&family=Cormorant+Garamond:ital,wght@0,300;0,400;1,300;1,400&display=swap" rel="stylesheet">
<style>
:root{--bg:#FBF7F2;--bg2:#F4EDE0;--ink:#2A1A0A;--ink-mid:#5C3D1E;--terracotta:#B85C38;--gold:#B8873A;--muted:#9C7A55;--faint:#C4A882;--border:#E2D4C0;--green:#5A8A6A}
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
body{background:var(--bg);color:var(--ink);font-family:'Noto Serif TC',serif;font-weight:300;min-height:100vh}
.wrap{max-width:680px;margin:0 auto;padding:0 24px 80px}
header{padding:36px 0 24px;border-bottom:1px solid var(--border);margin-bottom:32px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:8px}
.logo{font-family:'Cormorant Garamond',serif;font-style:italic;font-size:17px;color:var(--muted)}
.header-tag{font-size:11px;letter-spacing:.15em;text-transform:uppercase;color:var(--faint)}
h1{font-family:'Cormorant Garamond',serif;font-weight:400;font-size:clamp(24px,5vw,36px);color:var(--ink);margin-bottom:8px;line-height:1.3}
h1 em{font-style:italic;color:var(--terracotta)}
.page-sub{font-size:13px;color:var(--muted);line-height:1.85;margin-bottom:28px}
.mode-tabs{display:flex;margin-bottom:28px;border:1.5px solid var(--border);overflow:hidden}
.mode-tab{flex:1;padding:13px 16px;text-align:center;font-size:13px;cursor:pointer;transition:all .25s;background:white;color:var(--muted);border:none;font-family:'Noto Serif TC',serif;letter-spacing:.04em}
.mode-tab:first-child{border-right:1px solid var(--border)}
.mode-tab.active{background:var(--ink);color:white}
.mode-panel{display:none}
.mode-panel.active{display:block}
.section{margin-bottom:24px}
.section-label{font-size:11px;letter-spacing:.18em;text-transform:uppercase;color:var(--gold);margin-bottom:12px;display:block}
.field{margin-bottom:12px}
.field label{display:block;font-size:12px;color:var(--muted);margin-bottom:5px}
.field input,.field textarea{width:100%;padding:11px 14px;border:1.5px solid var(--border);background:white;font-family:'Noto Serif TC',serif;font-size:14px;color:var(--ink);outline:none;transition:border-color .2s;resize:vertical}
.field input:focus,.field textarea:focus{border-color:var(--terracotta)}
.field input::placeholder,.field textarea::placeholder{color:var(--faint)}
.field-row{display:flex;gap:10px}
.field-row .field{flex:1}
.get-row{display:grid;grid-template-columns:48px 1fr 2fr;gap:8px;margin-bottom:8px;align-items:start}
.generate-btn{width:100%;padding:16px;background:var(--ink);color:white;border:none;font-family:'Noto Serif TC',serif;font-size:14px;letter-spacing:.06em;cursor:pointer;transition:background .3s;margin-top:4px}
.generate-btn:hover:not(:disabled){background:var(--terracotta)}
.generate-btn:disabled{opacity:.55;cursor:not-allowed}
.results{display:none;margin-top:32px}
.results.visible{display:block;animation:fadeUp .4s ease}
.result-card{background:white;border:1px solid var(--border);margin-bottom:14px;position:relative;box-shadow:0 1px 10px rgba(90,50,20,.05)}
.result-card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,var(--terracotta),var(--gold))}
.card-header{display:flex;align-items:center;justify-content:space-between;padding:12px 16px 10px;border-bottom:1px solid var(--border)}
.card-title{font-size:11px;letter-spacing:.16em;text-transform:uppercase;color:var(--gold)}
.copy-btn{font-size:11px;color:var(--muted);background:none;border:1px solid var(--border);padding:4px 10px;cursor:pointer;font-family:'Noto Serif TC',serif;transition:all .2s}
.copy-btn:hover{border-color:var(--terracotta);color:var(--terracotta)}
.copy-btn.copied{border-color:var(--green);color:var(--green)}
.card-body{padding:16px}
.frr{margin-bottom:14px;padding-bottom:14px;border-bottom:1px solid var(--border)}
.frr:last-child{margin-bottom:0;padding-bottom:0;border-bottom:none}
.fkey{font-size:11px;letter-spacing:.1em;color:var(--faint);margin-bottom:5px;text-transform:uppercase}
.fval{font-family:'Cormorant Garamond',serif;font-size:17px;color:var(--ink);line-height:1.6}
.otext{font-size:13px;line-height:1.9;color:var(--ink-mid);white-space:pre-wrap;word-break:break-word}
.download-btn{width:100%;padding:15px;background:var(--terracotta);color:white;border:none;font-family:'Noto Serif TC',serif;font-size:14px;letter-spacing:.06em;cursor:pointer;transition:background .3s;margin-top:6px}
.download-btn:hover{background:var(--ink)}
.loading::after{content:'';animation:dots 1.2s infinite}
@keyframes dots{0%{content:''}33%{content:'ï¼'}66%{content:'ï¼ï¼'}100%{content:'ï¼ï¼ï¼'}}
@keyframes fadeUp{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
@media(max-width:500px){.field-row{flex-direction:column}.get-row{grid-template-columns:40px 1fr}.get-row .field:last-child{grid-column:1/-1}}
</style>
</head>
<body>
<div class="wrap">
<header>
  <div class="logo">è¨±è—æ–¹ãƒ»å…§å®¹å·¥å…·ç®±</div>
  <div class="header-tag">Landing Page ç”Ÿæˆå™¨</div>
</header>
<h1>ä¸€éµç”Ÿæˆ<br><em>Landing Page</em></h1>
<p class="page-sub">è²¼æ–‡ç« è®“ AI è‡ªå‹•åˆ†æï¼Œæˆ–ç›´æ¥æ‰‹å‹•å¡«ç©ºâ€”â€”å…©ç¨®æ¨¡å¼ï¼Œç”¢å‡ºå®Œæ•´ HTML ç›´æ¥ä¸Šå‚³ç”¨ã€‚</p>

<div class="mode-tabs">
  <button class="mode-tab active" onclick="switchMode('ai')">ğŸ¤– AI è‡ªå‹•åˆ†æ</button>
  <button class="mode-tab" onclick="switchMode('manual')">âœï¸ æ‰‹å‹•å¡«ç©º</button>
</div>

<!-- AI æ¨¡å¼ -->
<div class="mode-panel active" id="panel-ai">
  <div class="section">
    <span class="section-label">è¨­å®š</span>
    <div class="field-row">
      <div class="field"><label>å¼•æµå“åç¨±</label><input type="text" id="ai-lead" placeholder="ä¾‹å¦‚ï¼šç´„æœƒæººæ°´å°ç…§è¡¨"></div>
      <div class="field"><label>Kit è¡¨å–® ID</label><input type="text" id="ai-kit" placeholder="ä¾‹å¦‚ï¼š9141329"></div>
    </div>
    <div class="field"><label>Anthropic API Keyï¼ˆåªå­˜åœ¨ç€è¦½å™¨ï¼Œä¸æœƒå¤–å‚³ï¼‰</label><input type="password" id="ai-key" placeholder="sk-ant-..."></div>
  </div>
  <div class="section">
    <span class="section-label">è²¼å…¥æ–‡ç« </span>
    <div class="field"><textarea id="ai-article" style="min-height:180px" placeholder="æŠŠä½ çš„æ–‡ç« å…¨æ–‡è²¼åœ¨é€™è£¡â‹¯â‹¯"></textarea></div>
  </div>
  <button class="generate-btn" id="ai-btn" onclick="runAI()">é–‹å§‹åˆ†æä¸¦ç”Ÿæˆæ–‡æ¡ˆ</button>
</div>

<!-- æ‰‹å‹•æ¨¡å¼ -->
<div class="mode-panel" id="panel-manual">
  <div class="section">
    <span class="section-label">åŸºæœ¬è¨­å®š</span>
    <div class="field-row">
      <div class="field"><label>ä½ çš„åå­—</label><input type="text" id="m-name" value="è¨±è—æ–¹"></div>
      <div class="field"><label>Kit è¡¨å–® ID</label><input type="text" id="m-kit" placeholder="ä¾‹å¦‚ï¼š9141329"></div>
    </div>
    <div class="field"><label>èº«ä»½</label><input type="text" id="m-title" value="å¸Œå¡”ç™‚ç™’å°å¸«ãƒ»é—œä¿‚éˆæ°£ç™‚ç™’å¸«"></div>
  </div>
  <div class="section">
    <span class="section-label">é é¢æ–‡æ¡ˆ</span>
    <div class="field-row">
      <div class="field"><label>ä¸»æ¨™é¡Œç¬¬ä¸€è¡Œ</label><input type="text" id="m-t1" placeholder="ä¾‹å¦‚ï¼šä½ åœ¨é—œä¿‚è£¡"></div>
      <div class="field"><label>æ–œé«”ç¬¬äºŒè¡Œï¼ˆç´…è‰²ï¼‰</label><input type="text" id="m-t2" placeholder="ä¾‹å¦‚ï¼šæººæ°´äº†å—ï¼Ÿ"></div>
    </div>
    <div class="field"><label>å‰¯æ¨™é¡Œ</label><input type="text" id="m-sub" placeholder="ä¾‹å¦‚ï¼š12 é¡Œå°ç…§è¡¨ï¼Œå¹«ä½ çœ‹æ¸…æ¥šä½ åœ¨é—œä¿‚è£¡çš„ä½ç½®"></div>
    <div class="field"><label>é‡‘å¥</label><textarea id="m-quote" style="min-height:70px" placeholder="å¼•ç”¨æ–‡ç« è£¡æœ€æ‰“å‹•äººçš„ä¸€å¥è©±"></textarea></div>
    <div class="field"><label>é‡‘å¥ä¾†æºèªªæ˜</label><input type="text" id="m-cite" placeholder="ä¾‹å¦‚ï¼šç´„æœƒæººæ°´é¢¨éšªå°ç…§è¡¨"></div>
  </div>
  <div class="section">
    <span class="section-label">ä½ æœƒæ”¶åˆ°ï¼ˆä¸‰é …ï¼‰</span>
    <div class="get-row">
      <div class="field"><label>åœ–ç¤º</label><input type="text" id="g1i" placeholder="ğŸ’—"></div>
      <div class="field"><label>åç¨±</label><input type="text" id="g1n" placeholder="é …ç›®ä¸€åç¨±"></div>
      <div class="field"><label>èªªæ˜</label><input type="text" id="g1d" placeholder="ä¸€å¥èªªæ˜"></div>
    </div>
    <div class="get-row">
      <div class="field"><label>åœ–ç¤º</label><input type="text" id="g2i" placeholder="ğŸ§­"></div>
      <div class="field"><label>åç¨±</label><input type="text" id="g2n" placeholder="é …ç›®äºŒåç¨±"></div>
      <div class="field"><label>èªªæ˜</label><input type="text" id="g2d" placeholder="ä¸€å¥èªªæ˜"></div>
    </div>
    <div class="get-row">
      <div class="field"><label>åœ–ç¤º</label><input type="text" id="g3i" placeholder="ğŸ“©"></div>
      <div class="field"><label>åç¨±</label><input type="text" id="g3n" placeholder="é …ç›®ä¸‰åç¨±"></div>
      <div class="field"><label>èªªæ˜</label><input type="text" id="g3d" placeholder="ä¸€å¥èªªæ˜"></div>
    </div>
  </div>
  <div class="section">
    <span class="section-label">è¡¨å–®</span>
    <div class="field-row">
      <div class="field"><label>è¡¨å–®æ¨™é¡Œ</label><input type="text" id="m-ftitle" placeholder="å…è²»é ˜å–å°ç…§è¡¨"></div>
      <div class="field"><label>æŒ‰éˆ•æ–‡å­—</label><input type="text" id="m-btn" placeholder="æˆ‘ä¸æƒ³å†æººæ°´äº† â†’"></div>
    </div>
  </div>
  <button class="generate-btn" onclick="runManual()">ç”Ÿæˆ Landing Page HTML</button>
</div>

<!-- çµæœ -->
<div class="results" id="results">
  <div class="result-card" id="card-landing" style="display:none">
    <div class="card-header"><div class="card-title">Landing Page æ–‡æ¡ˆ</div><button class="copy-btn" onclick="copyEl('landing-text',this)">è¤‡è£½</button></div>
    <div class="card-body" id="landing-text"></div>
  </div>
  <div class="result-card" id="card-cta" style="display:none">
    <div class="card-header"><div class="card-title">æ–‡ç« çµå°¾ CTA</div><button class="copy-btn" onclick="copyEl('cta-text',this)">è¤‡è£½</button></div>
    <div class="card-body"><div class="otext" id="cta-text"></div></div>
  </div>
  <div class="result-card" id="card-email" style="display:none">
    <div class="card-header"><div class="card-title">Kit æ­¡è¿ä¿¡æ–‡æ¡ˆ</div><button class="copy-btn" onclick="copyEmail(this)">è¤‡è£½</button></div>
    <div class="card-body">
      <div class="frr"><div class="fkey">ä¸»æ—¨</div><div class="fval" id="email-subject"></div></div>
      <div class="frr"><div class="fkey">æ­£æ–‡</div><div class="otext" id="email-body"></div></div>
    </div>
  </div>
  <button class="download-btn" id="dl-btn" style="display:none" onclick="downloadHTML()">â†’ ä¸‹è¼‰å®Œæ•´ Landing Page HTML</button>
</div>
</div>

<script>
let pageData=null;

// è¨˜ä½ API key
window.addEventListener('load', () => {
  const saved = localStorage.getItem('anthropic_key');
  if (saved) document.getElementById('ai-key').value = saved;
});

function switchMode(m){
  document.querySelectorAll('.mode-tab').forEach((t,i)=>t.classList.toggle('active',(m==='ai'&&i===0)||(m==='manual'&&i===1)));
  document.getElementById('panel-ai').classList.toggle('active',m==='ai');
  document.getElementById('panel-manual').classList.toggle('active',m==='manual');
}

async function runAI(){
  const article=document.getElementById('ai-article').value.trim();
  const lead=document.getElementById('ai-lead').value.trim()||'å…è²»è³‡æº';
  const kitId=document.getElementById('ai-kit').value.trim();
  const apiKey=document.getElementById('ai-key').value.trim();
  if(!article)return alert('è«‹å…ˆè²¼å…¥æ–‡ç« å…§å®¹');
  if(!apiKey)return alert('è«‹å¡«å…¥ Anthropic API Key');
  localStorage.setItem('anthropic_key', apiKey);
  const btn=document.getElementById('ai-btn');
  btn.innerHTML='<span class="loading">AI åˆ†æä¸­</span>';
  btn.disabled=true;
  const prompt=`ä½ æ˜¯è¨±è—æ–¹çš„å…§å®¹åŠ©ç†ã€‚è¨±è—æ–¹æ˜¯ä¸€ä½å¸Œå¡”ç™‚ç™’å°å¸«å’Œé—œä¿‚éˆæ°£ç™‚ç™’å¸«ï¼Œæ–‡å­—é¢¨æ ¼æº«æš–ã€ç›´æ¥ã€æœ‰è©©æ„ï¼Œèªªè©±åƒä¸€å€‹çœŸå¯¦çš„äººï¼Œä¸åƒè¡ŒéŠ·ã€‚

ä½ çš„ä»»å‹™æ˜¯æ ¹æ“šä»¥ä¸‹æ–‡ç« ï¼Œç”Ÿæˆã€Œ${lead}ã€çš„ Landing Page æ‰€æœ‰æ–‡æ¡ˆã€‚

é¢¨æ ¼è¦æ±‚ï¼š
- æ–‡æ¡ˆè¦æœ‰æº«åº¦ï¼Œåƒä¸€å€‹æ‡‚ä½ çš„æœ‹å‹åœ¨èªªè©±
- ä¸ç”¨è¡ŒéŠ·è¡“èªï¼Œä¸è¦ã€Œé™æ™‚ã€ã€Œç«‹å³ã€ã€Œå…è²»ç²å–ã€é€™ç¨®æ„Ÿè¦º
- æ¨™é¡Œè¦æœ‰ç•«é¢æ„Ÿï¼Œè®“äººåœä¸‹ä¾†
- é‡‘å¥ç›´æ¥å¾æ–‡ç« è£¡èƒå–ï¼Œä¸è¦æ”¹å¯«
- æŒ‰éˆ•æ–‡å­—åƒä¸€å€‹é¸æ“‡ï¼Œä¸åƒä¸€å€‹æŒ‡ä»¤
- æ­¡è¿ä¿¡è¦åƒçœŸäººå¯«çš„ä¿¡ï¼Œæœ‰å‘¼æ‡‰ã€æœ‰æº«åº¦ã€çŸ­è€Œæœ‰åŠ›

æ–‡ç« å…§å®¹ï¼š
${article}

åªå› JSONï¼Œä¸è¦æœ‰å…¶ä»–æ–‡å­—ï¼š
{
  "page_title": "é é¢æ¨™é¡Œï¼Œæœ‰æ„Ÿè¦ºï¼Œå¸¶å…¥æ ¸å¿ƒå•é¡Œæˆ–æ´è¦‹ï¼Œ60å­—å…§",
  "og_desc": "ç¤¾ç¾¤åˆ†äº«é è¦½ï¼Œè®“äººæƒ³é»é€²ä¾†ï¼Œ80å­—å…§",
  "t1": "ä¸»æ¨™é¡Œç¬¬ä¸€è¡Œï¼Œåƒä¸€å¥èªªä¸­å¿ƒè£¡çš„è©±ï¼Œ8å­—å…§",
  "t2": "æ–œé«”ç¬¬äºŒè¡Œï¼Œå»¶ä¼¸æˆ–è½‰æŠ˜ï¼Œ6å­—å…§",
  "sub": "å‰¯æ¨™é¡Œï¼Œä¸€å¥è©±èªªæ¸…æ¥šé€™ä»½è³‡æºèƒ½å¸¶ä¾†ä»€éº¼ï¼Œ20å­—å…§",
  "quote": "å¾æ–‡ç« è£¡ç›´æ¥èƒå–æœ€æ‰“å‹•äººçš„ä¸€å¥è©±ï¼Œä¸è¦æ”¹å¯«åŸæ–‡",
  "cite": "é€™å¥è©±å‡ºè‡ªå“ªè£¡çš„èªªæ˜",
  "gets": [
    {"icon": "é©åˆçš„emoji", "name": "ç°¡çŸ­åç¨±", "desc": "ä¸€å¥èªªæ˜é€™å€‹é …ç›®èƒ½å¹«å°æ–¹åšä»€éº¼ï¼Œ25å­—å…§"},
    {"icon": "é©åˆçš„emoji", "name": "ç°¡çŸ­åç¨±", "desc": "25å­—å…§"},
    {"icon": "é©åˆçš„emoji", "name": "ç°¡çŸ­åç¨±", "desc": "25å­—å…§"}
  ],
  "form_title": "è¡¨å–®æ¨™é¡Œï¼Œåƒé‚€è«‹ä¸åƒè¦æ±‚ï¼Œ15å­—å…§",
  "form_note": "ä¸€å¥èªªæ˜å¡«äº†ä¹‹å¾Œæœƒæ”¶åˆ°ä»€éº¼",
  "btn": "æŒ‰éˆ•æ–‡å­—ï¼Œåƒä¸€å€‹å…§å¿ƒçš„é¸æ“‡ï¼Œè®“äººè¦ºå¾—æŒ‰ä¸‹å»æ˜¯ç‚ºè‡ªå·±åšäº†ä¸€ä»¶äº‹ï¼Œ10å­—å…§ï¼Œçµå°¾åŠ  â†’",
  "success_t1": "æˆåŠŸç•«é¢æ¨™é¡Œç¬¬ä¸€éƒ¨åˆ†ï¼Œç°¡çŸ­",
  "success_em": "æ–œé«”å¼·èª¿è©ï¼Œæº«æš–",
  "success_body": "æˆåŠŸå¾Œèªªçš„è©±ï¼Œåƒæœ‹å‹èªªçš„ï¼Œä¸‰è¡Œå…§",
  "cta": "æ–‡ç« çµå°¾å¼•æµæ®µè½ï¼Œ2-4å¥ï¼Œè‡ªç„¶æ‰¿æ¥æ–‡ç« æœ€å¾Œçš„æƒ…ç·’ï¼Œå¸¶å‡ºå¼•æµå“ï¼Œä¸è¦éŠ·å”®æ„Ÿï¼Œæœ€å¾Œå‘Šè¨´è®€è€…æ€éº¼æ‹¿ï¼ˆç•™è¨€æˆ–ç§è¨Šé—œéµå­—ï¼‰",
  "email_subject": "æ­¡è¿ä¿¡ä¸»æ—¨ï¼Œæœ‰æº«åº¦ï¼Œå¸¶å…¥ {{ subscriber.first_name }}",
  "email_body": "æ­¡è¿ä¿¡æ­£æ–‡ã€‚ä»¥ {{ subscriber.first_name }}ï¼Œä½ å¥½ é–‹é ­ã€‚2-3å¥èªªç‚ºä»€éº¼å¡«é€™å€‹è¡¨ç¤ºä»€éº¼ï¼Œèªªé€™ä»½è³‡æºæ€éº¼ç”¨ï¼Œæœ€å¾Œé‚€è«‹å°æ–¹ç›´æ¥å›ä¿¡èªªæ„Ÿå—ã€‚ç½²åè—æ–¹ã€‚ä¸è¶…é150å­—ã€‚èªæ°£åƒæœ‹å‹å¯«çš„ä¿¡ã€‚",
  "confirm_btn": "Kitç¢ºèªä¿¡æŒ‰éˆ•æ–‡å­—ï¼Œå‘¼æ‡‰é€™ç¯‡æ–‡ç« çš„æ ¸å¿ƒæƒ…ç·’æˆ–å¼•æµå“ä¸»é¡Œï¼Œåƒä¸€å€‹å…§å¿ƒçš„å®£å‘Šï¼Œ10å­—å…§ï¼Œä¸è¦ç”¨ç¢ºèªè¨‚é–±é€™é¡å­—çœ¼"
}`;
  try{
    const res=await fetch('https://api.anthropic.com/v1/messages',{
      method:'POST',
      headers:{'Content-Type':'application/json','x-api-key':apiKey,'anthropic-version':'2023-06-01','anthropic-dangerous-direct-browser-access':'true'},
      body:JSON.stringify({model:'claude-sonnet-4-20250514',max_tokens:2000,messages:[{role:'user',content:prompt}]})
    });
    const data=await res.json();
    if(!res.ok||data.error)throw new Error(data.error?.message||'API éŒ¯èª¤ '+res.status);
    const r=JSON.parse(data.content[0].text.replace(/```json|```/g,'').trim());
    pageData={...r,kitId,name:'è¨±è—æ–¹',title:'å¸Œå¡”ç™‚ç™’å°å¸«ãƒ»é—œä¿‚éˆæ°£ç™‚ç™’å¸«'};
    document.getElementById('landing-text').innerHTML=`<div class="frr"><div class="fkey">ä¸»æ¨™é¡Œ</div><div class="fval">${r.t1} / <em>${r.t2}</em></div></div><div class="frr"><div class="fkey">å‰¯æ¨™é¡Œ</div><div class="fval">${r.sub}</div></div><div class="frr"><div class="fkey">é‡‘å¥</div><div class="fval">ã€Œ${r.quote}ã€</div></div><div class="frr"><div class="fkey">è³£é»</div><div class="fval">${r.gets.map(g=>`${g.icon} ${g.name}ï¼š${g.desc}`).join('<br>')}</div></div><div class="frr"><div class="fkey">æŒ‰éˆ•</div><div class="fval">${r.btn}</div></div><div class="frr"><div class="fkey">Kit ç¢ºèªä¿¡æŒ‰éˆ•</div><div class="fval" id="confirm-btn-text">${r.confirm_btn}</div></div>`;
    document.getElementById('cta-text').textContent=r.cta;
    document.getElementById('email-subject').textContent=r.email_subject;
    document.getElementById('email-body').textContent=r.email_body;
    ['card-landing','card-cta','card-email'].forEach(id=>document.getElementById(id).style.display='block');
    document.getElementById('dl-btn').style.display='block';
    document.getElementById('results').classList.add('visible');
    document.getElementById('results').scrollIntoView({behavior:'smooth',block:'start'});
  }catch(err){alert('ç”Ÿæˆå¤±æ•—ï¼š'+err.message);console.error(err);}
  btn.innerHTML='é‡æ–°åˆ†æ';btn.disabled=false;
}

function runManual(){
  const r={
    t1:document.getElementById('m-t1').value||'ä¸»æ¨™é¡Œ',
    t2:document.getElementById('m-t2').value||'å‰¯æ¨™é¡Œ',
    sub:document.getElementById('m-sub').value,
    quote:document.getElementById('m-quote').value,
    cite:document.getElementById('m-cite').value,
    gets:[
      {icon:document.getElementById('g1i').value||'ğŸ’—',name:document.getElementById('g1n').value,desc:document.getElementById('g1d').value},
      {icon:document.getElementById('g2i').value||'ğŸ§­',name:document.getElementById('g2n').value,desc:document.getElementById('g2d').value},
      {icon:document.getElementById('g3i').value||'ğŸ“©',name:document.getElementById('g3n').value,desc:document.getElementById('g3d').value},
    ],
    form_title:document.getElementById('m-ftitle').value||'å…è²»é ˜å–',
    form_note:'è¼¸å…¥ä½ çš„è³‡è¨Šï¼Œæˆ‘é¦¬ä¸Šå¯„çµ¦ä½ ',
    btn:document.getElementById('m-btn').value||'æˆ‘æº–å‚™å¥½äº† â†’',
    success_t1:'æ”¶åˆ°äº†',success_em:'å¯„å‡ºäº†',
    success_body:'å»ä¿¡ç®±æ‰¾æ‰¾å§ã€‚\nä¸éœ€è¦ä¸€æ¬¡å…¨éƒ¨å›ç­”â€”â€”\nå“ªä¸€é¡Œè®“ä½ åœä¸‹ä¾†ï¼Œå°±åœåœ¨é‚£è£¡ã€‚',
    page_title:(document.getElementById('m-t1').value||'')+(document.getElementById('m-t2').value||'')+'ï½œè¨±è—æ–¹',
    og_desc:document.getElementById('m-sub').value,
  };
  pageData={...r,kitId:document.getElementById('m-kit').value,name:document.getElementById('m-name').value,title:document.getElementById('m-title').value};
  ['card-landing','card-cta','card-email'].forEach(id=>document.getElementById(id).style.display='none');
  document.getElementById('dl-btn').style.display='block';
  document.getElementById('results').classList.add('visible');
  document.getElementById('results').scrollIntoView({behavior:'smooth',block:'start'});
}

function downloadHTML(){
  if(!pageData)return;
  const d=pageData;
  const html=`<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>${d.page_title||''}</title>
<meta name="description" content="${d.og_desc||''}">
<meta property="og:title" content="${d.page_title||''}">
<meta property="og:description" content="${d.og_desc||''}">
<meta property="og:type" content="website"><meta property="og:locale" content="zh_TW">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@300;400;500&family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;1,300;1,400;1,500&display=swap" rel="stylesheet">
<style>
:root{--bg:#FBF7F2;--bg2:#F4EDE0;--ink:#2A1A0A;--ink-mid:#5C3D1E;--terracotta:#B85C38;--gold:#B8873A;--muted:#9C7A55;--faint:#C4A882;--border:#E2D4C0}
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}html{scroll-behavior:smooth}
body{background:var(--bg);color:var(--ink);font-family:'Noto Serif TC',serif;font-weight:300;overflow-x:hidden}
.wrap{max-width:600px;margin:0 auto;padding:0 28px}
header{padding:40px 0 0;opacity:0;animation:up 0.7s 0.1s ease forwards}
.site-tag{font-family:'Cormorant Garamond',serif;font-style:italic;font-size:13px;letter-spacing:.12em;color:var(--muted)}
.hero{padding:52px 0 44px}
.hero-label{display:inline-flex;align-items:center;gap:10px;font-size:11px;letter-spacing:.2em;text-transform:uppercase;color:var(--terracotta);margin-bottom:28px;opacity:0;animation:up 0.7s 0.2s ease forwards}
.hero-label::before{content:'';display:block;width:24px;height:1px;background:var(--terracotta)}
h1{font-family:'Cormorant Garamond',serif;font-weight:400;font-size:clamp(38px,8vw,60px);line-height:1.2;color:var(--ink);margin-bottom:10px;opacity:0;animation:up 0.7s 0.3s ease forwards}
h1 em{font-style:italic;color:var(--terracotta)}
.hero-sub{font-family:'Cormorant Garamond',serif;font-style:italic;font-size:clamp(16px,3vw,20px);color:var(--muted);margin-bottom:36px;line-height:1.6;opacity:0;animation:up 0.7s 0.4s ease forwards}
.pull{border-left:2px solid var(--terracotta);padding:18px 22px;margin-bottom:48px;background:var(--bg2);opacity:0;animation:up 0.7s 0.5s ease forwards}
.pull p{font-family:'Cormorant Garamond',serif;font-style:italic;font-size:clamp(16px,3vw,20px);line-height:1.8;color:var(--ink-mid)}
.pull cite{display:block;margin-top:10px;font-size:12px;letter-spacing:.1em;color:var(--faint);font-style:normal}
.gets{margin-bottom:48px;opacity:0;animation:up 0.7s 0.55s ease forwards}
.gets-title{font-size:11px;letter-spacing:.2em;text-transform:uppercase;color:var(--gold);margin-bottom:20px}
.get-item{display:flex;gap:18px;padding:18px 0;border-bottom:1px solid var(--border)}
.get-item:first-of-type{border-top:1px solid var(--border)}
.get-icon{font-size:22px;flex-shrink:0;padding-top:2px}
.get-name{font-size:15px;color:var(--ink);margin-bottom:4px}
.get-desc{font-size:13px;color:var(--muted);line-height:1.8}
.form-box{background:white;border:1px solid var(--border);padding:40px 36px;margin-bottom:60px;opacity:0;animation:up 0.7s 0.65s ease forwards;position:relative;overflow:hidden;box-shadow:0 2px 20px rgba(90,50,20,.06)}
.form-box::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--terracotta),var(--gold))}
.form-title{font-family:'Cormorant Garamond',serif;font-size:clamp(20px,4vw,26px);font-weight:400;color:var(--ink);margin-bottom:6px;line-height:1.4}
.form-note{font-size:13px;color:var(--muted);margin-bottom:28px;line-height:1.85}
.field{margin-bottom:12px}.field label{display:block;font-size:12px;letter-spacing:.08em;color:var(--muted);margin-bottom:6px}
.field input{display:block;width:100%;padding:13px 16px;border:1.5px solid var(--border);background:var(--bg);font-family:'Noto Serif TC',serif;font-size:15px;color:var(--ink);outline:none;transition:border-color .2s}
.field input:focus{border-color:var(--terracotta)}.field input::placeholder{color:var(--faint)}
.submit-btn{display:block;width:100%;margin-top:16px;padding:16px;background:var(--ink);color:white;border:none;font-family:'Noto Serif TC',serif;font-size:15px;letter-spacing:.06em;cursor:pointer;transition:background .3s}
.submit-btn:hover{background:var(--terracotta)}
.privacy{margin-top:14px;font-size:11px;color:var(--faint);text-align:center;letter-spacing:.05em}
.success{display:none;text-align:center;padding:12px 0}
.success-icon{font-size:40px;margin-bottom:20px}
.success-title{font-family:'Cormorant Garamond',serif;font-size:clamp(24px,5vw,34px);font-weight:400;color:var(--ink);margin-bottom:16px;line-height:1.4}
.success-title em{font-style:italic;color:var(--terracotta)}
.success-body{font-size:14px;color:var(--ink-mid);line-height:1.95;margin-bottom:20px;white-space:pre-line}
.success-note{font-size:12px;color:var(--faint);line-height:1.8;padding:14px 18px;border:1px solid var(--border)}
footer{padding:32px 0 52px;border-top:1px solid var(--border);opacity:0;animation:up 0.7s 0.75s ease forwards}
.footer-inner{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:12px}
.footer-name{font-family:'Cormorant Garamond',serif;font-style:italic;font-size:15px;color:var(--muted)}
.footer-note{font-size:11px;color:var(--faint);line-height:1.8;text-align:right}
@keyframes up{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@media(max-width:480px){.form-box{padding:28px 20px}.footer-inner{flex-direction:column;align-items:flex-start}.footer-note{text-align:left}}
</style>
</head>
<body>
<div class="wrap">
<header><div class="site-tag">${d.name}ãƒ»${d.title}</div></header>
<section class="hero">
  <div class="hero-label">å…è²»è³‡æº</div>
  <h1>${d.t1}<br><em>${d.t2}</em></h1>
  <p class="hero-sub">${d.sub}</p>
  <div class="pull"><p>ã€Œ${d.quote}ã€</p><cite>â€”â€” ${d.cite}</cite></div>
  <div class="gets">
    <div class="gets-title">é ˜å–å¾Œä½ æœƒæ”¶åˆ°</div>
    ${d.gets.map(g=>`<div class="get-item"><div class="get-icon">${g.icon}</div><div><div class="get-name">${g.name}</div><div class="get-desc">${g.desc}</div></div></div>`).join('\n    ')}
  </div>
</section>
<div class="form-box">
  <div id="form-area">
    <div class="form-title">${d.form_title}</div>
    <p class="form-note">${d.form_note}</p>
    <form id="kit-form" onsubmit="submitForm(event)">
      <div class="field"><label>ä½ çš„åå­—</label><input type="text" name="first_name" placeholder="è«‹è¼¸å…¥åå­—" required></div>
      <div class="field"><label>Email ä¿¡ç®±</label><input type="email" name="email_address" placeholder="è«‹è¼¸å…¥æœ‰æ•ˆçš„ Email" required></div>
      <button type="submit" class="submit-btn">${d.btn}</button>
    </form>
    <p class="privacy">ğŸ”’ ä½ çš„è³‡è¨Šä¸æœƒè¢«åˆ†äº«çµ¦ä»»ä½•ç¬¬ä¸‰æ–¹</p>
  </div>
  <div class="success" id="success-area">
    <div class="success-icon">âœ‰ï¸</div>
    <div class="success-title">${d.success_t1}<em>${d.success_em}</em></div>
    <p class="success-body">${d.success_body}</p>
    <div class="success-note">æ‰¾ä¸åˆ°ä¿¡ï¼Ÿè¨˜å¾—æª¢æŸ¥åƒåœ¾éƒµä»¶è³‡æ–™å¤¾ï¼Œæˆ–æŠŠ ${d.name} çš„ email åŠ å…¥è¯çµ¡äººã€‚</div>
  </div>
</div>
<footer>
  <div class="footer-inner">
    <div class="footer-name">${d.name}</div>
    <div class="footer-note">å¡«å¯«å³åŒæ„æ¥æ”¶é›»å­å ±<br>ä½ çš„ email ä¸æœƒåˆ†äº«çµ¦ä»»ä½•ç¬¬ä¸‰æ–¹</div>
  </div>
</footer>
</div>
<script>
async function submitForm(e){
  e.preventDefault();const btn=e.target.querySelector('button');
  btn.textContent='æº–å‚™ä¸­â‹¯';btn.disabled=true;
  try{await fetch('https://app.convertkit.com/forms/${d.kitId}/subscriptions',{method:'POST',body:new FormData(e.target),mode:'no-cors'});}catch(err){}
  document.getElementById('form-area').style.display='none';
  const s=document.getElementById('success-area');s.style.display='block';s.style.animation='fadeIn 0.5s ease forwards';
}
<\/script>
</body>
</html>`;
  const a=document.createElement('a');
  a.href=URL.createObjectURL(new Blob([html],{type:'text/html'}));
  a.download='index.html';a.click();
}

function copyEl(id,btn){
  navigator.clipboard.writeText(document.getElementById(id).innerText).then(()=>{
    btn.textContent='å·²è¤‡è£½ âœ“';btn.classList.add('copied');
    setTimeout(()=>{btn.textContent='è¤‡è£½';btn.classList.remove('copied');},2000);
  });
}
function copyEmail(btn){
  const text='ä¸»æ—¨ï¼š'+document.getElementById('email-subject').textContent+'\n\n'+document.getElementById('email-body').textContent;
  navigator.clipboard.writeText(text).then(()=>{
    btn.textContent='å·²è¤‡è£½ âœ“';btn.classList.add('copied');
    setTimeout(()=>{btn.textContent='è¤‡è£½';btn.classList.remove('copied');},2000);
  });
}
</script>
</body>
</html>
